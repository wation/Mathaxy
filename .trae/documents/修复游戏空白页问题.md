# 修复点击第1关后显示空白页的问题

## 问题根因
1. **答案按钮生成逻辑错误**：`if index < 19` 条件可能导致按钮显示不完整
2. **计时器时间耗尽后没有处理**：导致界面卡住
3. **缺少游戏完成逻辑**：没有保存进度和更新用户资料
4. **UI渲染时机问题**：`isLoading` 状态管理不当

## 解决方案

### 1. 修复答案按钮生成逻辑
- 修改答案按钮的生成逻辑，确保显示0-18的所有可能答案
- 优化按钮布局，确保所有按钮都能正确显示

### 2. 添加计时器时间耗尽处理
- 当时间到0时，显示游戏结束状态
- 禁用所有答案按钮
- 显示"时间到"提示和返回按钮

### 3. 实现游戏完成逻辑
- 当所有题目答完时，保存游戏进度
- 更新用户资料（完成关卡、增加勋章等）
- 检查并解锁角色
- 提供返回关卡选择或重新开始的选项

### 4. 优化UI渲染
- 改进 `isLoading` 状态管理
- 确保数据加载完成后再显示游戏界面
- 添加适当的加载状态显示

## 修改文件
- `/Users/yanzhe/workspace/Mathaxy/MathaxyAI/MathaxyAI-iOS/Mathaxy/Modules/Home/View/HomeView.swift`