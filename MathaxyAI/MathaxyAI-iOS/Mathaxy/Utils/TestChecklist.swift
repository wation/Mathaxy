import Foundation

// MARK: - æµ‹è¯•æ£€æŸ¥æ¸…å•
/// åº”ç”¨åŠŸèƒ½éªŒè¯æ¸…å•
struct TestChecklist {
    
    // MARK: - ç™»å½•æ¨¡å—æµ‹è¯•
    static let loginTests = [
        "âœ“ æ¸¸å®¢ç™»å½•ï¼šè¾“å…¥æ˜µç§°å¹¶æˆåŠŸç™»å½•",
        "âœ“ æ¸¸å®¢ç™»å½•éªŒè¯ï¼šæ˜µç§°ä¸èƒ½ä¸ºç©º",
        "âœ“ æ¸¸å®¢ç™»å½•éªŒè¯ï¼šæ˜µç§°é•¿åº¦é™åˆ¶ï¼ˆ1-20å­—ç¬¦ï¼‰",
        "âœ“ æ˜µç§°ç”Ÿæˆï¼šéªŒè¯é»˜è®¤æ˜µç§°ç”Ÿæˆé€»è¾‘",
        "âœ“ ç™»å½•è®°å½•ï¼šéªŒè¯ç™»å½•ä¿¡æ¯æ˜¯å¦ä¿å­˜",
        "âœ“ å®¶é•¿è¾…åŠ©ç»‘å®šï¼šç•Œé¢æ˜¾ç¤ºä½†åŠŸèƒ½å¯é€‰"
    ]
    
    // MARK: - é¦–é¡µæ¨¡å—æµ‹è¯•
    static let homeTests = [
        "âœ“ é¦–é¡µæ˜¾ç¤ºï¼šç”¨æˆ·æ˜µç§°æ­£ç¡®æ˜¾ç¤º",
        "âœ“ é¦–é¡µæ˜¾ç¤ºï¼šå½“å‰å…³å¡ä¿¡æ¯æ­£ç¡®",
        "âœ“ é¦–é¡µæ˜¾ç¤ºï¼šå®Œæˆè¿›åº¦æ¡æ­£ç¡®æ˜¾ç¤º",
        "âœ“ å¯¼èˆªæŒ‰é’®ï¼šå¼€å§‹æ¸¸æˆæŒ‰é’®åŠŸèƒ½",
        "âœ“ å¯¼èˆªæŒ‰é’®ï¼šæˆå°±æŒ‰é’®åŠŸèƒ½",
        "âœ“ å¯¼èˆªæŒ‰é’®ï¼šè®¾ç½®æŒ‰é’®åŠŸèƒ½",
        "âœ“ å¡é€šè§’è‰²ï¼šè§’è‰²æ˜¾ç¤ºæˆ–éšè—ï¼ˆåŸºäºŽè§£é”çŠ¶æ€ï¼‰",
        "âœ“ æœ¬åœ°åŒ–ï¼šè¯­è¨€åˆ‡æ¢æ˜¯å¦ç”Ÿæ•ˆ"
    ]
    
    // MARK: - æ¸¸æˆæ¨¡å—æµ‹è¯•
    static let gameTests = [
        "âœ“ æ¸¸æˆåˆå§‹åŒ–ï¼šé¢˜ç›®æ­£ç¡®åŠ è½½",
        "âœ“ æ¸¸æˆæ˜¾ç¤ºï¼šé¢˜ç›®æ ¼å¼ä¸º 'A + B = ?'",
        "âœ“ æ¸¸æˆæ˜¾ç¤ºï¼šç­”æ¡ˆç½‘æ ¼æ˜¾ç¤º 0-18 æ•°å­—",
        "âœ“ è®¡æ—¶å™¨ï¼šå€’è®¡æ—¶æ­£ç¡®è¿è¡Œ",
        "âœ“ ç­”é¢˜åŠŸèƒ½ï¼šç‚¹å‡»ç­”æ¡ˆèƒ½æäº¤",
        "âœ“ ç­”é¢˜åé¦ˆï¼šç­”å¯¹æ˜¾ç¤ºæ­£ç¡®æç¤º",
        "âœ“ ç­”é¢˜åé¦ˆï¼šç­”é”™æ˜¾ç¤ºé”™è¯¯æç¤º",
        "âœ“ æ¸¸æˆæµç¨‹ï¼šå¤šé¢˜é€’è¿›æ­£ç¡®",
        "âœ“ æ¸¸æˆç»“æŸï¼šæ˜¾ç¤ºæˆç»©ç»Ÿè®¡",
        "âœ“ æ¸¸æˆä¿å­˜ï¼šç­”é¢˜è®°å½•ä¿å­˜åˆ° GameSession"
    ]
    
    // MARK: - å…³å¡é€‰æ‹©æ¨¡å—æµ‹è¯•
    static let levelSelectTests = [
        "âœ“ å…³å¡åˆ—è¡¨ï¼šæ˜¾ç¤ºæ‰€æœ‰ 50 ä¸ªå…³å¡",
        "âœ“ å…³å¡çŠ¶æ€ï¼šé”å®šå…³å¡æ˜¾ç¤ºä¸ºé”å®šçŠ¶æ€",
        "âœ“ å…³å¡çŠ¶æ€ï¼šå·²è§£é”å…³å¡å¯ç‚¹å‡»",
        "âœ“ å…³å¡å®Œæˆï¼šå·²å®Œæˆçš„å…³å¡æ˜¾ç¤ºå®Œæˆæ ‡è®°",
        "âœ“ å…³å¡é€‰æ‹©ï¼šç‚¹å‡»å…³å¡è¿›å…¥æ¸¸æˆ",
        "âœ“ å½“å‰å…³å¡ï¼šé«˜äº®æ˜¾ç¤ºå½“å‰å…³å¡"
    ]
    
    // MARK: - æˆå°±ç³»ç»Ÿæµ‹è¯•
    static let achievementTests = [
        "âœ“ æˆå°±æ˜¾ç¤ºï¼šæ‰€æœ‰ 4 ä¸ªå‹‹ç« ç±»åž‹æ­£ç¡®æ˜¾ç¤º",
        "âœ“ æˆå°±çŠ¶æ€ï¼šå·²èŽ·å¾—çš„å‹‹ç« æ˜¾ç¤ºä¸ºèŽ·å¾—çŠ¶æ€",
        "âœ“ æˆå°±çŠ¶æ€ï¼šæœªèŽ·å¾—çš„å‹‹ç« æ˜¾ç¤ºä¸ºé”å®šçŠ¶æ€",
        "âœ“ å‹‹ç« åˆ—è¡¨ï¼šæ˜¾ç¤ºå‹‹ç« åç§°å’Œæè¿°",
        "âœ“ æˆå°±è¿›åº¦ï¼šæ˜¾ç¤ºèŽ·å¾—å‹‹ç« çš„æ•°é‡",
        "âœ“ å¡é€šè§’è‰²ï¼šè§’è‰²åˆ—è¡¨æ˜¾ç¤ºå¯è§£é”æ¡ä»¶"
    ]
    
    // MARK: - è®¾ç½®æ¨¡å—æµ‹è¯•
    static let settingsTests = [
        "âœ“ è¯­è¨€è®¾ç½®ï¼šæ”¯æŒå¤šè¯­è¨€é€‰æ‹©",
        "âœ“ è¯­è¨€è®¾ç½®ï¼šåˆ‡æ¢è¯­è¨€åŽç•Œé¢ç«‹å³æ›´æ–°",
        "âœ“ éŸ³æ•ˆè®¾ç½®ï¼šå¼€å…³éŸ³æ•ˆåŠŸèƒ½",
        "âœ“ éŸ³ä¹è®¾ç½®ï¼šå¼€å…³èƒŒæ™¯éŸ³ä¹åŠŸèƒ½",
        "âœ“ éœ‡åŠ¨è®¾ç½®ï¼šå¼€å…³æ‰‹æœºéœ‡åŠ¨åŠŸèƒ½",
        "âœ“ è®¾ç½®ä¿å­˜ï¼šè®¾ç½®æŒä¹…åŒ–åˆ°æœ¬åœ°å­˜å‚¨",
        "âœ“ æ•°æ®é‡ç½®ï¼šé‡ç½®æç¤ºæ˜¯å¦å¼¹å‡º",
        "âœ“ æ•°æ®é‡ç½®ï¼šç¡®è®¤é‡ç½®åŽæ•°æ®æ¸…ç©º"
    ]
    
    // MARK: - æ•°æ®æŒä¹…åŒ–æµ‹è¯•
    static let persistenceTests = [
        "âœ“ ç”¨æˆ·æ•°æ®ï¼šæ˜µç§°ã€æˆå°±ã€å…³å¡è¿›åº¦ä¿å­˜",
        "âœ“ åº”ç”¨è®¾ç½®ï¼šè¯­è¨€ã€éŸ³æ•ˆã€éŸ³ä¹ã€éœ‡åŠ¨è®¾ç½®ä¿å­˜",
        "âœ“ æ¸¸æˆæ•°æ®ï¼šæ¸¸æˆè¿›åº¦ã€ç­”é¢˜è®°å½•ä¿å­˜",
        "âœ“ æ•°æ®æ¢å¤ï¼šé‡å¯åº”ç”¨åŽæ•°æ®æ­£ç¡®æ¢å¤",
        "âœ“ å­˜å‚¨æœåŠ¡ï¼šUserDefaults æ­£ç¡®åºåˆ—åŒ–/ååºåˆ—åŒ–"
    ]
    
    // MARK: - æœ¬åœ°åŒ–æµ‹è¯•
    static let localizationTests = [
        "âœ“ è‹±æ–‡æ˜¾ç¤ºï¼šæ‰€æœ‰æ–‡æœ¬æ­£ç¡®æ˜¾ç¤ºä¸ºè‹±æ–‡",
        "âœ“ ä¸­æ–‡æ˜¾ç¤ºï¼šæ‰€æœ‰æ–‡æœ¬æ­£ç¡®æ˜¾ç¤ºä¸ºä¸­æ–‡",
        "âœ“ åŠ¨æ€æ–‡æœ¬ï¼šå‚æ•°åŒ–å­—ç¬¦ä¸²æ­£ç¡®å±•ç¤ºï¼ˆå¦‚'æ¬¢è¿Žï¼Œç”¨æˆ·åï¼'ï¼‰",
        "âœ“ æ—¥æœŸæ˜¾ç¤ºï¼šæ—¥æœŸæœ¬åœ°åŒ–æ­£ç¡®",
        "âœ“ æ•°å­—æ˜¾ç¤ºï¼šæ•°å­—æ ¼å¼æœ¬åœ°åŒ–æ­£ç¡®"
    ]
    
    // MARK: - æ€§èƒ½æµ‹è¯•
    static let performanceTests = [
        "âœ“ å¯åŠ¨é€Ÿåº¦ï¼šåº”ç”¨å¯åŠ¨ä¸è¶…è¿‡ 3 ç§’",
        "âœ“ æ¸¸æˆæµç•…æ€§ï¼šæ¸¸æˆè¿è¡Œå¸§çŽ‡ç¨³å®š",
        "âœ“ å†…å­˜å ç”¨ï¼šé•¿æ—¶é—´æ¸¸æˆæ— å†…å­˜æ³„æ¼",
        "âœ“ ç”µæ± æ¶ˆè€—ï¼šé€‚åº¦ç”µæ± ä½¿ç”¨"
    ]
    
    // MARK: - å…¼å®¹æ€§æµ‹è¯•
    static let compatibilityTests = [
        "âœ“ iOS ç‰ˆæœ¬ï¼šæ”¯æŒ iOS 18.0 åŠä»¥ä¸Š",
        "âœ“ å±å¹•å°ºå¯¸ï¼šæ”¯æŒå„ç§ iPhone å±å¹•å°ºå¯¸",
        "âœ“ æ–¹å‘é€‚é…ï¼šæ”¯æŒç«–å±æ˜¾ç¤º",
        "âœ“ æ·±è‰²æ¨¡å¼ï¼šæ”¯æŒç³»ç»Ÿæ·±è‰²æ¨¡å¼"
    ]
    
    // MARK: - é”™è¯¯å¤„ç†æµ‹è¯•
    static let errorHandlingTests = [
        "âœ“ æ–‡ä»¶ç¼ºå¤±ï¼šå¤„ç†æ–‡ä»¶ä¸å­˜åœ¨æƒ…å†µ",
        "âœ“ æ•°æ®æ ¼å¼ï¼šå¤„ç†æŸåçš„æ•°æ®",
        "âœ“ æƒé™é—®é¢˜ï¼šå¤„ç†ç¼ºå°‘æƒé™çš„æƒ…å†µ",
        "âœ“ ç½‘ç»œé”™è¯¯ï¼šä¼˜é›…å¤„ç†ç½‘ç»œæ•…éšœï¼ˆå¦‚æœ‰è”ç½‘åŠŸèƒ½ï¼‰"
    ]
    
    // MARK: - æµ‹è¯•æ‰§è¡Œè®°å½•
    static let executionNotes = """
    æµ‹è¯•æ‰§è¡Œæµç¨‹ï¼š
    
    1. åˆå§‹åŒ–æµ‹è¯•
       - åˆ é™¤åº”ç”¨æ•°æ®ï¼ˆSettings > Resetï¼‰
       - é‡æ–°å®‰è£…åº”ç”¨
       - éªŒè¯é¦–æ¬¡å¯åŠ¨ä½“éªŒ
    
    2. åŠŸèƒ½æµ‹è¯•
       - æŒ‰æ¨¡å—é¡ºåºæµ‹è¯•ç™»å½•ã€é¦–é¡µã€æ¸¸æˆç­‰åŠŸèƒ½
       - è®°å½•æ¯ä¸ªæµ‹è¯•ç‚¹çš„é€šè¿‡/å¤±è´¥çŠ¶æ€
       - å¯¹å¤±è´¥é¡¹ç›®è¿›è¡Œæˆªå›¾å’Œæè¿°
    
    3. é›†æˆæµ‹è¯•
       - æµ‹è¯•æ¨¡å—é—´çš„äº¤äº’
       - éªŒè¯æ•°æ®åœ¨æ¨¡å—é—´çš„ä¼ é€’
       - æ£€æŸ¥å¯¼èˆªæµç¨‹çš„å®Œæ•´æ€§
    
    4. æœ¬åœ°åŒ–æµ‹è¯•
       - åˆ‡æ¢ä¸åŒè¯­è¨€å¹¶éªŒè¯æ˜¾ç¤º
       - æ£€æŸ¥æ–‡æœ¬æº¢å‡ºæˆ–æŽ’ç‰ˆé—®é¢˜
       - éªŒè¯æ‰€æœ‰åŠ¨æ€æ–‡æœ¬çš„å‚æ•°æ›¿æ¢
    
    5. æ€§èƒ½æµ‹è¯•
       - ä½¿ç”¨ Xcode Instruments ç›‘æŽ§æ€§èƒ½æŒ‡æ ‡
       - è®°å½•å†…å­˜ã€CPUã€å¸§çŽ‡ç­‰æ•°æ®
       - è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
    
    6. è¾¹ç•Œæ¡ä»¶æµ‹è¯•
       - æµ‹è¯•æœ€å¤§/æœ€å°å€¼
       - æµ‹è¯•ç©ºå€¼å¤„ç†
       - æµ‹è¯•å¼‚å¸¸è¾“å…¥
    
    æµ‹è¯•å·¥å…·ï¼š
    - Xcode Simulatorï¼ˆiPhone SE, iPhone 14 Proï¼‰
    - Xcode Debugger
    - Xcode Instruments (Memory, CPU, Energy Impact)
    - Console æ—¥å¿—
    """
}

// MARK: - æµ‹è¯•çŠ¶æ€æžšä¸¾
enum TestStatus: String {
    case notStarted = "âšª æœªå¼€å§‹"
    case inProgress = "ðŸŸ¡ è¿›è¡Œä¸­"
    case passed = "âœ… é€šè¿‡"
    case failed = "âŒ å¤±è´¥"
}

// MARK: - æµ‹è¯•æŠ¥å‘Šç»“æž„
struct TestReport {
    var timestamp: Date = Date()
    var testResults: [String: TestStatus] = [:]
    var notes: String = ""
    
    mutating func updateTestResult(_ testName: String, status: TestStatus) {
        testResults[testName] = status
    }
    
    func generateReport() -> String {
        let dateFormatter = DateFormatter()
        dateFormatter.dateStyle = .medium
        dateFormatter.timeStyle = .medium
        
        var report = "=== æµ‹è¯•æŠ¥å‘Š ===\n"
        report += "æ—¶é—´: \(dateFormatter.string(from: timestamp))\n\n"
        
        let passedCount = testResults.values.filter { 
            if case .passed = $0 { return true }
            return false
        }.count
        
        report += "æµ‹è¯•ç»“æžœç»Ÿè®¡:\n"
        report += "é€šè¿‡: \(passedCount)/\(testResults.count)\n\n"
        
        report += "è¯¦ç»†ç»“æžœ:\n"
        for (test, status) in testResults.sorted(by: { $0.key < $1.key }) {
            report += "\(test): \(status.rawValue)\n"
        }
        
        if !notes.isEmpty {
            report += "\nå¤‡æ³¨:\n\(notes)\n"
        }
        
        return report
    }
}
